<div id="modal-help" class="modal" >
	<h3 id="help-errCode">Error # </h3>
	<br/>
	<hr>
	<h4 id="help-errLine">line</h4>
	<br/>
	<hr>
	<h4 id="help-errExp">explanation</h4>
</div>

<div id="loginForm">
	<h2>User Login</h2>
	<hr>
	<span id='loginWarning'> </span>
	<button class='btn btn-primary bttn-help-user' id='bttn-help-user'  type='button'>?</button>
	<br/>
	<form action="/users/login" method="post" id="form-login">
		<label for="user_email">User Email Address:</label>
		<input type="text" name="user_email" id="user_email" placeholder="example@email.com">
		<br/>
		<label for="user_password">User Password:</label>
		<input type="text" name="user_password" id="user_password" placeholder="Password">
		<hr>
		<!-- <input type="submit" class='btn btn-primary' id="submitButton" value="Login"> -->
		<button class='btn btn-primary bttn-login' type='button'>Login</button>
		<button class='btn btn-primary bttn-register' type='button'>Register</button>
	</form>
	<hr>
</div>
<div id="newUserForm">
	<h2>Create a New Account</h2>
	<hr>
	<span id='newUserWarning'> </span>
	<button class='btn btn-primary bttn-help-new' id='bttn-help-new' type='button'>?</button>
	<br/>
	<form action="/users/create" method="post" id="form-newuser">
		<label for="user_Name">Create a Username:</label>
		<input type="text" name="user_name" id="user_name" placeholder="Username">
		<br/>
		<label for="register_user_email">Email Address:</label>
		<input type="text" name="user_email" id="register_user_email" placeholder="Email">
		<br/>
		<label for="register_user_password">Password:</label>
		<input type="text" name="user_password" id="register_user_password" placeholder="Password">
		<br/>
		<label for="user_password_2">Confirm Password:</label>
		<input type="text" name="user_password_2" id="user_password_2" placeholder="Confirm Password">
		<hr>
		<!-- <input type="submit" id="submitButton" class='btn btn-primary' value="Create New User">  -->
		<button class='btn btn-primary bttn-create-new' type='button'>Create New User</button>
		<button class='btn btn-primary bttn-existing' type='button'>Already Registered</button>
	</form>
</div>
<hr>
<hr>

<!-- 
	<script type="text/javascript" src="../../javascript/login.js"></script>  
-->


<script>
	var dispHelpUser = function (_showBttn) {
		//0 = hide the help button until an error comes in
		//1=  show the help button
		if (_showBttn) {
			$("#bttn-help-user").css("display", "block");
		} else {
			$("#bttn-help-user").css("display", "none");
		};
	};

	var dispHelpNew = function (_showBttn) {
		//0 = hide the help button until an error comes in
		//1=  show the help button
		if (_showBttn) {
			$("#bttn-help-new").css("display", "block");
		} else {
			$("#bttn-help-new").css("display", "none");
		};
	};

	var dispNewUserForm = function () {
		$("#newUserForm").css("display", "block");
		$("#loginForm").css("display", "none");
		dispHelpNew(false);
	};

	var dispCurrentUserForm = function () {
		$("#newUserForm").css("display", "none");
		$("#loginForm").css("display", "block");
		dispHelpUser(false);
	};

	var createNewUser = function () {
		//clear out the warning first
		$("#newUserWarning").text(" ");
		$.post("/users/create",
			{
				user_name: $("#user_name").val(),
				user_email: $("#register_user_email").val(),
				user_password: $("#register_user_password").val(),
				user_password2: $("#user_password2").val()
			},
			function (data, status) {
				if (data.errCode === 0) {
					//there is an error
					$("#newUserWarning").text(" ");
					dispHelpNew(false);
				} else {
					$("#newUserWarning").text(data.errMsg);
					dispHelpNew(true);
				};
			});
	};


	var checkLogin = function () {
		//check the login
		//clear out the warning first
		$("#loginWarning").text(" ");
		$.post("/users/login",
			{
				user_email: $("#user_email").val(),
				user_password: $("#user_password").val()
			},
			function (data, status) {
				if (data.errCode === 0) {
					//there is an error
					$("#loginWarning").text(" ");
					dispHelpUser(false);
				} else {
					$("#loginWarning").text(data.errMsg);
					dispHelpUser(true);
				};
			});
	};


	$(document).ready(function () {
		dispCurrentUserForm();
	});
	$(document.body).on("click", ".bttn-register", dispNewUserForm);
	$(document.body).on("click", ".bttn-existing", dispCurrentUserForm);
	$(document.body).on("click", ".bttn-create-new", createNewUser);
	$(document.body).on("click", ".bttn-login", checkLogin);
	$(document.body).on("click", ".bttn-help-user", checkLogin);
	$(document.body).on("click", ".bttn-help-new", checkLogin);

</script>